/*
  Code.h - Library for Code translate.
  Copyright (c) 2015-2016 ARESPNO.
*/

#ifndef _CODE_H
#define _CODE_H

#include "Arduino.h"

const char encodeTable[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
const uint8_t decodeTable[] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x3F,
	0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3A, 0x3B,
	0x3C, 0x3D, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06,
	0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E,
	0x0F, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16,
	0x17, 0x18, 0x19, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F, 0x20,
	0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28,
	0x29, 0x2A, 0x2B, 0x2C, 0x2D, 0x2E, 0x2F, 0x30,
	0x31, 0x32, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00 
};

const char hexToChar[] = "0123456789ABCDEF";
const char hexToChar2[] = "0123456789abcdef";

class Code {

public:
	Code();
	
	// Utf8<->Unicode转换，用法参考mbstowcs()和wcstombs()
	size_t utf8stounis(wchar_t *unistr, const char *utf8str, size_t count);
	size_t unistoutf8s(char *utf8str, const wchar_t *unistr, size_t count);
	// Base64<->Bytes转换
	size_t base64tobytes(uint8_t *bytestr, const char *base64str, size_t count);
	size_t bytestobase64(char *base64str, const uint8_t *bytestr, size_t count);
	
	// URL encode
	size_t URLEncode(char *encode, const char *src, size_t count);
	String URLEncode2(const char *src);

	// Create a GUID
	uint8_t cguid(char *guid, boolean dashes = true);

};

extern Code CODE;

#endif  // _CODE_H
